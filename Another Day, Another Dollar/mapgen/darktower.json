[
  {
    "type": "city_building",
    "id": "magic_academy_necro",
    "locations": [ "land" ],
	"spawns": { "group": "GROUP_DEMONS", "population": [ 150, 500 ], "radius": [ 5, 10 ] },
    "overmaps": [
      { "point": [ 0, 0, 0 ], "overmap": "magic_academy_ground_necro_north" },
      { "point": [ 0, 0, 1 ], "overmap": "magic_academy_2nd_necro_north" },
      { "point": [ 0, 0, 2 ], "overmap": "magic_academy_3rd_necro_north" },
      { "point": [ 0, 0, 3 ], "overmap": "magic_academy_4th_necro_north" },
      { "point": [ 0, 0, 4 ], "overmap": "magic_academy_5th_necro_north" },
      { "point": [ 0, 0, 5 ], "overmap": "magic_academy_6th_necro_north" },
      { "point": [ 0, 0, 6 ], "overmap": "magic_academy_7th_necro_north" },
      { "point": [ 0, 0, 7 ], "overmap": "magic_academy_8th_necro_north" },
      { "point": [ 0, 0, 8 ], "overmap": "magic_academy_roof_necro_north" },
      { "point": [ 0, 0, -1 ], "overmap": "magic_academy_basement_necro_north" }
    ]
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_ground_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        ",.####################.,",
        ",.#d h&o==jjjj==o%h d#.,",
        ",.#@@  +========+  @@#.,",
        ",.########=~~=########.,",
        ",...#d h0o=~~=o$h d#...,",
        ",...#@@  +====+  @@#...,",
        ",...#######==#######...,",
        ",[...##S  +==+  S##..[.,",
        ",.....#t ##++## t#.....,",
        ",.....#9##<  >##9#..[..,",
        ",..[..###c    c###.....,",
        ",.....##c E  E c##...[.,",
        ",,,,,,*          *,,,,,,",
        ",,,,,,*   HHHH   *,,,,,,",
        "......##c      c##......",
        "...[..###c rr c###......",
        ".....##<## h  ##<##..[..",
        ".[...#B t##++##t B#.....",
        "....##B  S#==#S  B##....",
        "...####+###==###+####...",
        "####xxy +======+ yxx####",
        "#D )   Eoj=~~=joI   ) D#",
        "#@@#HHTR#j====j#IEHH#@@#",
        "########################"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "place_monsters": [ { "monster": "GROUP_DEMONS", "x": 12, "y": 12, "density": 0.1, "repeat": [ 3, 5 ] } ],
      "terrain": {
        "[": [ [ "t_region_tree_fruit", 2 ], [ "t_region_tree_nut", 2 ], "t_region_tree_shade" ],
        " ": "t_thconc_floor",
        "#": "t_strconc_wall_black_darktower",
        ",": "t_concrete",
        "~": "t_lava",
        "=": "t_vitrified_grass",
        "j": "t_vitrified_grass",
        "}": "t_vitrified_grass"
      },
      "furniture": { ")": "f_beaded_door", "&": "f_desk", "%": "f_desk", "$": "f_desk", "0": "f_desk" },
      "place_loot": [
        { "item": "television", "x": 4, "y": 20, "chance": 100 },
        { "item": "television", "x": 19, "y": 20, "chance": 100 },
        { "item": "stereo", "x": 18, "y": 20, "chance": 100 },
        { "item": "stereo", "x": 5, "y": 20, "chance": 100 }
      ],
      "items": {
        "&": [ { "item": "classless_items", "chance": 10 }, { "item": "animist_items", "chance": 10 } ],
        "%": [ { "item": "classless_items", "chance": 10 }, { "item": "animist_items", "chance": 10 } ],
        "$": [ { "item": "classless_items", "chance": 10 }, { "item": "animist_items", "chance": 10 } ],
        "0": [ { "item": "classless_items", "chance": 10 }, { "item": "animist_items", "chance": 10 } ],
        "x": { "item": "enchanted_small_items", "chance": 20 },
        "r": [
          { "item": "academy_lore", "chance": 100 },
          { "item": "enchanted_small_items", "chance": 5 },
          { "item": "enchanted_combat_items", "chance": 1 }
        ],
        "d": [
          { "item": "magic_shop_clothes", "chance": 25, "repeat": [ 1, 2 ] },
          { "item": "enchanted_worn_items", "chance": 1 },
          { "item": "enchanted_small_items", "chance": 2 }
        ],
        "D": [
          { "item": "magic_shop_clothes", "chance": 30, "repeat": [ 1, 2 ] },
          { "item": "enchanted_worn_items", "chance": 2 },
          { "item": "enchanted_combat_items", "chance": 1 }
        ],
        "R": [ { "item": "magic_shop_books", "chance": 10, "repeat": [ 0, 2 ] }, { "item": "spellbook_loot_2", "chance": 1 } ],
        "j": [
          { "item": "enchanted_small_items", "chance": 1, "repeat": [ 1, 2 ] },
          { "item": "enchanted_combat_items", "chance": 1 },
          { "item": "enchanted_misc", "chance": 1 }
        ]
      }
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_basement_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "``####################``",
        "``#@d|vRR  H|FFF  666#``",
        "``#@ )    lH|       6#``",
        "``###||+|||||4 JA 6###``",
        "````#H  JWWQ|O J  n#````",
        "````#H     Z|1 J  5#````",
        "````##T    Z|2   Y##````",
        "`````##JJy Q|3  7##`````",
        "``````#|||+|||+||#``````",
        "``````#qq|   < |U#``````",
        "``````#q +     +U#``````",
        "``````#|||||   ||#``````",
        "``````#          #``````",
        "``````# $ $ ~~~ i#``````",
        "``````#     ~~~ i#``````",
        "``````# ! ! ~~~ i#``````",
        "`````##     ~~~  ##`````",
        "`````#  % % ~~~   #`````",
        "````##      ~~~   ##````",
        "```## = = = ~~~~~  ##```",
        "####i       ~~~~~  i####",
        "#9 |i = = = ~~~~~  i| 9#",
        "#9 ]                ] 9#",
        "########################"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "traps": { "=": "tr_rollmat" },
      "terrain": { " ": "t_thconc_floor", "`": "t_rock", "]": "t_door_glass_green_c", "#": "t_strconc_wall_black_darktower", "~": "t_lava" },
      "furniture": {
        ")": "f_beaded_door",
        "}": "f_huge_mana_crystal",
        "!": [ "f_ergometer", "f_ergometer_mechanical" ],
        "$": [ "f_treadmill", "f_treadmill_mechanical" ],
        "%": "f_exercise"
      },
      "place_loot": [ { "item": "television", "x": 8, "y": 1, "chance": 100 }, { "item": "stereo", "x": 7, "y": 1, "chance": 100 } ],
      "items": {
        "q": [
          { "item": "alchemy_items", "chance": 4, "repeat": [ 1, 3 ] },
          { "item": "magic_shop_potions", "chance": 3, "repeat": [ 1, 2 ] }
        ],
        "l": { "item": "enchanted_small_items", "chance": 1 },
        "v": { "item": "boss_treasure_items", "chance": 2, "repeat": [ 1, 3 ] },
        "d": [
          { "item": "magic_shop_clothes", "chance": 25, "repeat": [ 1, 2 ] },
          { "item": "enchanted_worn_items", "chance": 5 },
          { "item": "enchanted_small_items", "chance": 1 },
          { "item": "enchanted_combat_items", "chance": 1 }
        ],
        "R": [ { "item": "magic_shop_books", "chance": 30 }, { "item": "enchanted_misc", "chance": 1 } ],
        "i": [ { "item": "enchanted_small_items", "chance": 10 }, { "item": "enchanted_combat_items", "chance": 1 } ]
      },
      "place_monsters": [ { "monster": "GROUP_DEMONS", "x": 12, "y": 12, "density": 0.1, "repeat": [ 1, 5 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_2nd_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "__####################__",
        "__#d h&o,______,o%h d#__",
        "__#@@  +,,,__,,,+  @@#__",
        "__########,__,########__",
        "____#d h0o,__,o$h d#____",
        "____#@@  +,,,,+  @@#____",
        "____#######,,#######____",
        "_____##S  +,,+  S##_____",
        "______#t ##++## t#______",
        "______#9##>  <##9#______",
        "______###      ###______",
        "______##  hhhh  ##______",
        "______)y  ffff  y)______",
        "______)y  hhhh  y)______",
        "______##        ##______",
        "______###  ff  ###______",
        "_____##>## hh ##>##_____",
        "_____#` v##))##vE`#_____",
        "____##`E R#__#R  `##____",
        "___###)]))#__#))])###___",
        "#####,,,===__===,,,#####",
        "#k  ],=}=______=}=,]  k#",
        "#RHH)====______====)HHR#",
        "########################"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": {
        "_": "t_open_air",
        "/": "t_open_air_rooved_outside",
        ",": "t_concrete",
        "#": "t_strconc_wall_black_darktower",
        ")": "t_wall_glass",
        "]": "t_door_glass_c",
        "=": "t_thconc_floor",
        "j": "t_thconc_floor",
        "}": "t_thconc_floor"
      },
      "furniture": {
        "y": [ "f_indoor_plant_y", "f_indoor_plant" ],
        "`": "f_magic_bench",
        "}": "f_huge_mana_crystal",
        "&": "f_desk",
        "%": "f_desk",
        "$": "f_desk",
        "0": "f_desk"
      },
      "items": {
        "&": [ { "item": "classless_items", "chance": 3 }, { "item": "animist_items", "chance": 7 } ],
        "%": [ { "item": "classless_items", "chance": 3 }, { "item": "animist_items", "chance": 50 } ],
        "$": [ { "item": "classless_items", "chance": 3 }, { "item": "animist_items", "chance": 7 } ],
        "0": [ { "item": "classless_items", "chance": 30 }, { "item": "animist_items", "chance": 7 } ],
        "H": [
          { "item": "magic_shop_clothes", "chance": 5 },
          { "item": "enchanted_small_items", "chance": 1 },
          { "item": "magic_shop_books", "chance": 1 }
        ],
        "`": [
          { "item": "alchemy_items", "chance": 35, "repeat": [ 1, 2 ] },
          { "item": "magic_tools_and_loot", "chance": 3 },
          { "item": "magic_shop_potions", "chance": 2 }
        ],
        "v": { "item": "boss_treasure_items", "chance": 2, "repeat": [ 0, 2 ] },
        "d": [
          { "item": "magic_shop_clothes", "chance": 2, "repeat": [ 1, 2 ] },
          { "item": "enchanted_worn_items", "chance": 1 },
          { "item": "enchanted_small_items", "chance": 1 }
        ],
        "R": [ { "item": "classless_items", "chance": 2 }, { "item": "enchanted_misc", "chance": 1 } ]
      },
      "place_monsters": [ { "monster": "GROUP_DEMONS", "x": 12, "y": 12, "density": 0.1, "repeat": [ 3, 5 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_3rd_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "__....................__",
        "__......________......__",
        "__......________......__",
        "__........____........__",
        "____......____......____",
        "____......____......____",
        "____.......__.......____",
        "_____......__......_____",
        "______...##))##...______",
        "______..##<  >##..______",
        "______.##))]]))##.______",
        "______##y       ##______",
        "______)i h h h h )______",
        "______)i & & & & )______",
        "______##        ##______",
        "______.##R && R##.______",
        "_____...## E y##..._____",
        "_____....##))##...._____",
        "____......#__#......____",
        "___........__........___",
        ".....______________.....",
        ".....______________.....",
        ".....______________.....",
        "........................"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { "_": "t_open_air", ")": "t_wall_glass", "#": "t_strconc_wall_black_darktower", "]": "t_door_glass_c", ".": "t_shingle_flat_roof" },
      "furniture": { "&": "f_magic_bench" },
      "items": {
        "&": [ { "item": "magic_tools_and_loot", "chance": 3, "repeat": [ 1, 2 ] }, { "item": "magic_shop_potions", "chance": 3 } ],
        "R": [ { "item": "magic_shop_books", "chance": 3 }, { "item": "dragon_books", "chance": 1 } ]
      },
      "place_monsters": [ { "monster": "GROUP_DEMONS", "x": 12, "y": 12, "density": 0.1, "repeat": [ 1, 5 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_4th_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________##))##_________",
        "________##>  <##________",
        "_______##))]]))##_______",
        "______##y       ##______",
        "______)i h h h h )______",
        "______)i & & & & )______",
        "______##        ##______",
        "_______##R && R##_______",
        "________## E y##________",
        "_________##))##_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { "_": "t_open_air", ")": "t_wall_glass", "#": "t_strconc_wall_black_darktower", "]": "t_door_glass_c" },
      "furniture": { "&": "f_magic_bench" },
      "items": {
        "&": [ { "item": "magic_tools_and_loot", "chance": 3 }, { "item": "magic_shop_potions", "chance": 3 } ],
        "R": [ { "item": "magic_shop_books", "chance": 3 }, { "item": "dragon_books", "chance": 1 } ]
      },
      "place_monsters": [ { "monster": "GROUP_DEMONS", "x": 12, "y": 12, "density": 0.1, "repeat": [ 3, 5 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_5th_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________##))##_________",
        "________##<  >##________",
        "_______##))]]))##_______",
        "______##Tx     y##______",
        "______)Hl  ee  lH)______",
        "______)Hl  ee  lH)______",
        "______##y  ee  T##______",
        "_______##y    y##_______",
        "________##k Es##________",
        "_________##))##_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { "_": "t_open_air", ")": "t_wall_glass", "#": "t_strconc_wall_black_darktower", "]": "t_door_glass_c" },
      "items": {
        "l": { "item": "enchanted_small_items", "chance": 5 },
        "H": [
          { "item": "verges", "chance": 3 },
          { "item": "enchanted_worn_items", "chance": 1 },
          { "item": "enchanted_combat_items", "chance": 3 },
          { "item": "enchanted_small_items", "chance": 5 }
        ],
        "s": [ { "item": "enchanted_small_items", "chance": 1 }, { "item": "enchanted_combat_items", "chance": 1 } ]
      },
      "place_monsters": [ { "monster": "GROUP_MAGES", "x": 12, "y": 12, "density": 0.1, "repeat": [ 1, 1 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_6th_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________##))##_________",
        "________##>  <##________",
        "_______##))]]))##_______",
        "______##R      R##______",
        "______)rh RRRR hr)______",
        "______)rh RRRR hr)______",
        "______##R      R##______",
        "_______##R hh R##_______",
        "________##RrrR##________",
        "_________##))##_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { "_": "t_open_air", ")": "t_wall_glass", "#": "t_strconc_wall_black_darktower", "]": "t_door_glass_c" },
      "items": {
        "r": [
          { "item": "magic_shop_books", "chance": 2 },
          { "item": "magic_shop_wands", "chance": 1 },
          { "item": "enchanted_small_items", "chance": 5 },
          { "item": "enchanted_combat_items", "chance": 2 }
        ],
        "R": [ { "item": "magic_shop_books", "chance": 3 }, { "item": "dragon_books", "chance": 3 } ]
      },
      "place_monsters": [ { "monster": "GROUP_MAGES", "x": 12, "y": 12, "density": 0.1, "repeat": [ 1, 1 ] } ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_7th_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________##))##_________",
        "________##<  >##________",
        "_______##))]]))##_______",
        "______##?      ?##______",
        "______)  A=  =A  )______",
        "______)  A=  =A  )______",
        "______##?      ?##______",
        "_______##?    ?##_______",
        "________##?  ?##________",
        "_________##))##_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { "_": "t_open_air", ")": "t_wall_glass", "#": "t_strconc_wall_black_darktower", "-": "t_thconc_floor", "]": "t_door_glass_c" },
      "furniture": { "=": "f_magic_bench", "-": "f_alembic", "?": "f_rack_wood" },
      "items": {
        "=": [
          { "item": "animist_items", "chance": 3, "repeat": [ 1, 2 ] },
          { "item": "magic_shop_potions", "chance": 3 },
          { "item": "magic_recipe_basic", "chance": 4 },
          { "item": "magic_shop_wands", "chance": 5 }
        ],
        "?": [ { "item": "animist_items", "chance": 4 }, { "item": "magic_shop_potions", "chance": 3 } ]
      }
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_8th_necro",
    "object": {
      "fill_ter": "t_thconc_floor",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________##))##_________",
        "________##>  <##________",
        "_______##      ##_______",
        "______##  ====  ##______",
        "______)i ====== i)______",
        "______)i ====== i)______",
        "______##  ====  ##______",
        "_______##      ##_______",
        "________## ii ##________",
        "_________##))##_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": {
        "_": "t_open_air",
        ")": "t_wall_glass",
        "#": "t_strconc_wall_black_darktower",
        "]": "t_door_glass_c",
        "=": "t_thconc_floor",
        "0": "t_thconc_floor",
        "-": "t_thconc_floor"
      },
      "furniture": { "0": "f_orrery" }
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "magic_academy_roof_necro",
    "object": {
      "fill_ter": "t_vitrified_grass",
      "rows": [
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "_________######_________",
        "________##+++>##________",
        "_______##c====c##_______",
        "______#b ==HH== b#______",
        "______#^ ==HH== ^#______",
        "______#i ==HH== i#______",
        "______#G =C*b@= G#______",
        "_______##c0E,0c##_______",
        "________##0..0##________",
        "_________######_________",
        "__________#__#__________",
        "________________________",
        "________________________",
        "________________________",
        "________________________",
        "________________________"
      ],
      "palettes": [ "standard_domestic_palette" ],
      "terrain": { ">": "t_stairs_down", "_": "t_open_air", "=": "t_vitrified_grass", "#": "t_sconc_wall_halfway", "+": "t_vitrified_grass", "-": "t_vitrified_grass", "*": "t_vitrified_grass", "^": "t_vitrified_grass" },
      "furniture": { 
	  "0": "f_orrery", 
	  "G": "f_magic_circle", 
	  ",": "f_magic_circle_black",
      ".": "f_everfrost_crystal",	  
	  "E": "f_magic_circle_green", 
	  "@": "f_magic_circle_red", 
	  "C": "f_magic_circle_blue", 
	  "H": "f_nm_nether_lily",
	  "i": "f_alembic", 
	  "*": "f_necrobrazier", 
	  "b": "f_altar", 
	  "%": "f_magic_circle", 
	  "^": "f_brazier" 
	  },
      "place_monster": [
        { "monster": "mon_necromage", "x": 11, "y": 14 }
      ],
      "place_loot": [
        { "item": "devils_catalogue", "x": 11, "y": 14, "chance": 100 },
		{ "item": "money_strap_hundred", "x": 7, "y": 12, "chance": 100, "repeat": 100 },
		{ "item": "money_strap_hundred", "x": 16, "y": 12, "chance": 100, "repeat": 100 },
        { "item": "vergists_manual", "x": 12, "y": 14, "chance": 100 }
      ]
    }
  }
]
